#include <Adafruit_GFX.h>
#include <Adafruit_NeoMatrix.h>
#include <Adafruit_NeoPixel.h>
#include <Metro.h>
#ifndef PSTR
  #define PSTR
#endif
#define PIN 6
Adafruit_NeoMatrix matrix = Adafruit_NeoMatrix(16, 16, PIN, NEO_MATRIX_TOP + NEO_MATRIX_LEFT + NEO_MATRIX_COLUMNS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800);
const unsigned char unicornRedFrame0[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,255,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,255,0,255,0,0,255,255,255,0,255,255,0,255,0,0,0,255,255,0,255,255,0,255,255,0,255,255,255,0,0,255,0,0,255,0,0,255,0,255,0,0,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,0,0,255,0,0,255,255,0,0,255,255};
const unsigned char unicornGreenFrame0[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,255,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,255,0,255,0,0,255,255,255,0,255,255,0,255,0,0,0,255,255,0,255,255,0,255,255,0,255,255,255,0,0,255,0,0,255,0,0,255,0,255,0,0,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,0,0,255,0,0,255,255,0,0,255,255};
const unsigned char unicornBlueFrame0[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,255,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,255,0,255,0,0,255,255,255,0,255,255,0,255,0,0,0,255,255,0,255,255,0,255,255,0,255,255,255,0,0,255,0,0,255,0,0,255,0,255,0,0,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,0,0,255,0,0,255,255,0,0,255,255};
const unsigned char unicornRedFrame1[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,0,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,255,0,255,255,255,0,255,255,0,0,0,255,0,0,0,255,255,255,255,255,255,0,255,255,255,0,255,0,255,255,255,0,255,0,0,255,255,0,0,255,255,255,0,255,0,255,0,255,0,0,0,0,255,0,255,0,255,255,0,0,255,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,255,255,255,0,0,255,255,0,0,255,255,255,255};
const unsigned char unicornGreenFrame1[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,0,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,255,0,255,255,255,0,255,255,0,0,0,255,0,0,0,255,255,255,255,255,255,0,255,255,255,0,255,0,255,255,255,0,255,0,0,255,255,0,0,255,255,255,0,255,0,255,0,255,0,0,0,0,255,0,255,0,255,255,0,0,255,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,255,255,255,0,0,255,255,0,0,255,255,255,255};
const unsigned char unicornBlueFrame1[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,0,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,255,0,255,255,255,0,255,255,0,0,0,255,0,0,0,255,255,255,255,255,255,0,255,255,255,0,255,0,255,255,255,0,255,0,0,255,255,0,0,255,255,255,0,255,0,255,0,255,0,0,0,0,255,0,255,0,255,255,0,0,255,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,255,255,255,0,0,255,255,0,0,255,255,255,255};
const unsigned char unicornRedFrame2[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,0,0,0,255,255,255,255,255,0,255,0,0,255,0,0,255,255,255,0,255,255,255,0,0,255,0,255,255,255,255,255,0,255,0,0,255,255,0,0,255,0,255,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,255,0,255,255,0,255,255,255,0,255,0,255,0,0,255,0,255,0,0,255,0,255,255,0,255,0,255,255,0,255,255,255,0,0,255,0,255,0,255,0,0,255,255,0,0,255,255,255,255,0,255,255,0,0};
const unsigned char unicornGreenFrame2[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,0,0,0,255,255,255,255,255,0,255,0,0,255,0,0,255,255,255,0,255,255,255,0,0,255,0,255,255,255,255,255,0,255,0,0,255,255,0,0,255,0,255,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,255,0,255,255,0,255,255,255,0,255,0,255,0,0,255,0,255,0,0,255,0,255,255,0,255,0,255,255,0,255,255,255,0,0,255,0,255,0,255,0,0,255,255,0,0,255,255,255,255,0,255,255,0,0};
const unsigned char unicornBlueFrame2[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,0,0,0,255,255,255,255,255,0,255,0,0,255,0,0,255,255,255,0,255,255,255,0,0,255,0,255,255,255,255,255,0,255,0,0,255,255,0,0,255,0,255,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,255,0,255,255,0,255,255,255,0,255,0,255,0,0,255,0,255,0,0,255,0,255,255,0,255,0,255,255,0,255,255,255,0,0,255,0,255,0,255,0,0,255,255,0,0,255,255,255,255,0,255,255,0,0};
const unsigned char unicornRedFrame3[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,0,0,255,255,0,255,255,0,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,0,255,0,0,255,255,255,0,0,255,0,255,0,255,255,0,0,255,255,0,0,255,0,0,255,255,0,0,255};
const unsigned char unicornGreenFrame3[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,0,0,255,255,0,255,255,0,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,0,255,0,0,255,255,255,0,0,255,0,255,0,255,255,0,0,255,255,0,0,255,0,0,255,255,0,0,255};
const unsigned char unicornBlueFrame3[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,255,0,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,255,255,255,255,255,255,255,0,255,0,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,255,0,255,255,255,255,0,0,255,255,255,255,255,0,0,255,0,255,0,0,255,255,255,0,255,255,255,0,0,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,0,255,0,0,255,0,0,255,255,0,255,255,255,0,0,0,0,0,255,255,0,0,0,0,255,255,0,255,255,0,0,255,0,255,0,0,255,0,255,0,0,255,255,0,255,255,0,0,255,0,0,255,255,255,0,0,255,0,255,0,255,255,0,0,255,255,0,0,255,0,0,255,255,0,0,255};
const unsigned char unicornRedFrame4[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,0,255,255,255,255,255,0,0,255,255,255,255,255,0,255,0,255,0,0,255,255,255,255,0,255,255,255,0,0,255,255,255,0,255,255,255,255,255,0,0,255,255,0,0,255,0,0,255,255,0,255,0,0,255,255,0,255,255,255,0,255,0,255,0,255,255,0,0,0,0,255,0,255,255,255,255,0,255,0,255,0,0,255,0,0,255,0,0,255,255,255,255,0,0,255,255,0,255,255,255,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,255,0,0,255,255};
const unsigned char unicornGreenFrame4[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,0,255,255,255,255,255,0,0,255,255,255,255,255,0,255,0,255,0,0,255,255,255,255,0,255,255,255,0,0,255,255,255,0,255,255,255,255,255,0,0,255,255,0,0,255,0,0,255,255,0,255,0,0,255,255,0,255,255,255,0,255,0,255,0,255,255,0,0,0,0,255,0,255,255,255,255,0,255,0,255,0,0,255,0,0,255,0,0,255,255,255,255,0,0,255,255,0,255,255,255,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,255,0,0,255,255};
const unsigned char unicornBlueFrame4[16*16] = {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,255,0,255,255,0,255,255,255,255,255,255,255,255,255,0,255,0,0,255,0,255,0,255,255,255,255,255,255,255,0,255,0,255,0,255,255,255,0,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,255,255,255,255,0,255,0,255,255,255,255,255,0,0,255,255,255,255,255,0,255,0,255,0,0,255,255,255,255,0,255,255,255,0,0,255,255,255,0,255,255,255,255,255,0,0,255,255,0,0,255,0,0,255,255,0,255,0,0,255,255,0,255,255,255,0,255,0,255,0,255,255,0,0,0,0,255,0,255,255,255,255,0,255,0,255,0,0,255,0,0,255,0,0,255,255,255,255,0,0,255,255,0,255,255,255,0,255,255,0,255,255,255,255,255,0,0,255,255,0,255,0,255,255,0,0,255,255};
Metro AnimateTimer = Metro(10);
byte FrameNumber = 0;
void setup() {
  Serial.begin(115200);
  matrix.begin();
  matrix.setBrightness(50);
  matrix.fillScreen(0);
  matrix.show();
}
void loop() {
  if (AnimateTimer.check() == 1) {
    TimerEvent();
  }
}
uint16_t drawRGB24toRGB565(byte r, byte g, byte b) {
  return ((r / 8) << 11) | ((g / 4) << 5) | (b / 8);
}
void TimerEvent() {
  if (FrameNumber == 0) {
      for (byte y = 0; y < 16; y++) {
        for (byte x = 0; x < 16; x++) {
          byte loc = x + y*16;
          matrix.drawPixel(x, y, drawRGB24toRGB565((unicornRedFrame0[loc]), (unicornGreenFrame0[loc]), (unicornBlueFrame0[loc])));
        }
      }
      FrameNumber = 1;
      Serial.println(" Frame 0 completed");
  }
   else if (FrameNumber == 1) {
      for (byte y = 0; y < 16; y++) {
        for (byte x = 0; x < 16; x++) {
          byte loc = x + y*16;
          matrix.drawPixel(x, y, drawRGB24toRGB565((unicornRedFrame1[loc]), (unicornGreenFrame1[loc]), (unicornBlueFrame1[loc])));
        }
      }
      FrameNumber = 2;
      Serial.println(" Frame 1 completed");
  }
   else if (FrameNumber == 2) {
      for (byte y = 0; y < 16; y++) {
        for (byte x = 0; x < 16; x++) {
          byte loc = x + y*16;
          matrix.drawPixel(x, y, drawRGB24toRGB565((unicornRedFrame2[loc]), (unicornGreenFrame2[loc]), (unicornBlueFrame2[loc])));
        }
      }
      FrameNumber = 3;
      Serial.println(" Frame 2 completed");
  }
   else if (FrameNumber == 3) {
      for (byte y = 0; y < 16; y++) {
        for (byte x = 0; x < 16; x++) {
          byte loc = x + y*16;
          matrix.drawPixel(x, y, drawRGB24toRGB565((unicornRedFrame3[loc]), (unicornGreenFrame3[loc]), (unicornBlueFrame3[loc])));
        }
      }
      FrameNumber = 4;
      Serial.println(" Frame 3 completed");
  }
   else if (FrameNumber == 4) {
      for (byte y = 0; y < 16; y++) {
        for (byte x = 0; x < 16; x++) {
          byte loc = x + y*16;
          matrix.drawPixel(x, y, drawRGB24toRGB565((unicornRedFrame4[loc]), (unicornGreenFrame4[loc]), (unicornBlueFrame4[loc])));
        }
      }
      FrameNumber = 0;
  }
  matrix.show();
}
